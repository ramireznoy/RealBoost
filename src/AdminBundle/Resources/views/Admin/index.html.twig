<!DOCTYPE html>
<html lang="en">

    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>RealBoost</title>

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
        <link href="{{ asset('assets/css/bootstrap.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/css/nifty.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/bootstrap-select/bootstrap-select.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/css/demo/nifty-demo-icons.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/ionicons/css/ionicons.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/themify-icons/themify-icons.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/font-awesome/css/font-awesome.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/magic-check/css/magic-check.min.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/datatables/media/css/dataTables.bootstrap.css') }}" rel="stylesheet">
        <link href="{{ asset('assets/plugins/datatables/extensions/Responsive/css/dataTables.responsive.css') }}" rel="stylesheet">

        <link href="{{ asset('assets/plugins/pace/pace.min.css') }}" rel="stylesheet">
        <script src="{{ asset('assets/plugins/pace/pace.min.js') }}"></script>
    </head>

    <body>
        <div id="container" class="effect aside-float aside-bright mainnav-lg">

            <header id="navbar">
                <div id="navbar-container" class="boxed">

                    <div class="navbar-header">
                        <a href="{{ path('admin_home') }}" class="navbar-brand">
                            <img src="{{ asset('assets/img/boost_logo.png') }}" alt="RealBoost" class="brand-icon">
                            <div class="brand-title">
                                <span class="brand-text">RealBoost</span>
                            </div>
                        </a>
                    </div>

                    <div class="navbar-content clearfix">
                        <ul class="nav navbar-top-links pull-left">

                            <li class="tgl-menu-btn">
                                <a class="mainnav-toggle" href="#">
                                    <i class="demo-pli-view-list"></i>
                                </a>
                            </li>
                        </ul>
                        <ul class="nav navbar-top-links pull-right">

                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown" class="dropdown-toggle">
                                    <i class="demo-pli-bell"></i>
                                    {#                                    <span class="badge badge-header badge-danger"></span>#}
                                </a>

                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-md">
                                    <div class="pad-all bord-btm">
                                        <p class="text-semibold text-main mar-no">Sin notificaciones.</p>
                                    </div>
                                    <!--<div class="nano scrollable">
                                        <div class="nano-content">
                                            <ul class="head-list">

                                                <li>
                                                    <a class="media" href="#">
                                                        <span class="badge badge-success pull-right">90%</span>
                                                        <div class="media-left">
                                                            <i class="demo-pli-data-settings icon-2x"></i>
                                                        </div>
                                                        <div class="media-body">
                                                            <div class="text-nowrap">HDD is full</div>
                                                            <small class="text-muted">50 minutes ago</small>
                                                        </div>
                                                    </a>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>

                                    <div class="pad-all bord-top">
                                        <a href="#" class="btn-link text-dark box-block">
                                            <i class="fa fa-angle-right fa-lg pull-right"></i>Ver todas
                                        </a>
                                    </div>-->
                                </div>
                            </li>

                            <li id="dropdown-user" class="dropdown">
                                <a href="#" data-toggle="dropdown" class="dropdown-toggle text-right">
                                    <span class="pull-right">
                                        <i class="demo-pli-male ic-user"></i>
                                    </span>
                                    <div class="username hidden-xs">{{ user.fullname }}</div>
                                </a>

                                <div class="dropdown-menu dropdown-menu-md dropdown-menu-right panel-default">

                                    <ul class="head-list">
                                        <li>
                                            <a href="#">
                                                <i class="demo-pli-male icon-lg icon-fw"></i> Perfil
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <span class="badge badge-danger pull-right"></span>
                                                <i class="demo-pli-mail icon-lg icon-fw"></i> Mensajes
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="demo-psi-repair icon-lg icon-fw"></i> Configuración
                                            </a>
                                        </li>
                                    </ul>

                                    <div class="pad-all text-right">
                                        <a href="{{ path('admin_logout') }}" class="btn btn-primary">
                                            <i class="demo-pli-unlock"></i> Salir
                                        </a>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>

                </div>
            </header>

            <div class="boxed">

                <div id="content-container">
                    {% include 'AdminBundle:Admin:dashboard.html.twig' with {'user':user} %}
                </div>

                <nav id="mainnav-container">
                    <div id="mainnav">

                        <div id="mainnav-menu-wrap">
                            <div class="nano">
                                <div class="nano-content">

                                    <div id="mainnav-profile" class="mainnav-profile">
                                        <div class="profile-wrap">
                                            <div class="pad-btm">
                                                <img class="img-circle img-sm img-border" src="{{ asset('assets/img/profile-photos/1.png') }}" alt="Profile Picture">
                                            </div>
                                            <a href="#profile-nav" class="box-block" data-toggle="collapse" aria-expanded="false">
                                                <span class="pull-right dropdown-toggle">
                                                    <i class="dropdown-caret"></i>
                                                </span>
                                                <p class="mnp-name">{{ user.fullname }}</p>
                                            </a>
                                        </div>
                                        <div id="profile-nav" class="collapse list-group bg-trans">
                                            <a href="#" class="list-group-item">
                                                <i class="demo-pli-male icon-lg icon-fw"></i> Perfil
                                            </a>
                                            <a href="#" class="list-group-item">
                                                <i class="demo-psi-repair icon-lg icon-fw"></i> Ajustes
                                            </a>
                                            <a href="{{ path('admin_logout') }}" class="list-group-item">
                                                <i class="demo-pli-unlock icon-fw"></i> Salir
                                            </a>
                                        </div>
                                    </div>

                                    <ul id="mainnav-menu" class="list-group">
                                        {% include 'AdminBundle:Admin/Menu:side_menu.html.twig' with menuitems %}
                                    </ul>

                                </div>
                            </div>
                        </div>

                    </div>
                </nav>

            </div>

            <footer id="footer">
                <p class="pad-lft">&#0169; 2016 Bawii</p>
            </footer>

            <button class="scroll-top btn">
                <i class="pci-chevron chevron-up"></i>
            </button>
        </div>

    </body>

    <script src="{{ asset('assets/js/jquery-2.2.4.min.js') }}"></script>
    <script src="{{ asset('assets/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('assets/js/nifty.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/bootstrap-select/bootstrap-select.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/morris-js/morris.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/morris-js/raphael-js/raphael.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/sparkline/jquery.sparkline.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/jquery.blockui.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/plugins/datatables/jquery.blockui.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/js/demo/dashboard.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/media/js/jquery.dataTables.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/media/js/dataTables.bootstrap.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/extensions/Responsive/js/dataTables.responsive.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/js/noback.js') }}"></script>


    <script>
        //# sourceURL=main_base.js
        var active_view = '';

        $(document).ready(function () {
            $('.ajaxload').click(function (ev) {
                ev.preventDefault();
                ajaxloader($(this).attr('href'));
            });
            $('.submit').click(function (ev) {
                var form = $(ev.target).parents('form:first');
                ajaxsubmit(form);
            });
        });
        function ajaxloader(url) {
            blockUI();
            $.ajax({
                url: url,
                method: 'POST',
                success: function (resp) {
                    unblockUI();
                    active_view = url;
                    $('#content-container').html(resp);
                    $('#content-container').find('.submit').click(function (ev) {
                        var form = $(ev.target).parents('form:first');
                        ajaxsubmit(form);
                    });
                },
                error: function () {
                    unblockUI();
                    $.niftyNoty({
                        type: 'danger',
                        message: 'No se pudo acceder el recurso solicitado ' + url,
                        container: 'floating',
                        timer: 5000
                    });
                }
            });
        }

        function ajaxsubmit(form, successcb, unsuccesscb, errorcb) {
            var url = $(form).attr('action');
            var data = {};
            $(form).find('input, select, textarea').each(
                    function () {
                        var input = $(this);
                        data[input.attr('name')] = input.val();
                    }
            );
            $.ajax({
                url: url,
                method: 'POST',
                data: data,
                success: function (resp) {
                    if (resp.success) {
                        $.niftyNoty({
                            type: 'success',
                            message: resp.message,
                            container: 'floating',
                            timer: 5000
                        });
                        $(window).scrollTop(0);
                        $(form).trigger('reset');
                        if (successcb !== null) {
                            if (resp.newrow !== null) {
                                successcb(resp.newrow);
                            } else {
                                successcb();
                            }
                        }
                    } else {
                        /*$.niftyNoty({
                         type: 'danger',
                         message : resp.cause,
                         container : 'floating',
                         timer : 5000
                         });*/
                        if (unsuccesscb !== null) {
                            unsuccesscb(resp);
                        }
                    }
                },
                error: function () {
                    $.niftyNoty({
                        type: 'danger',
                        message: '<strong>No se pudo procesar la solicitud.</strong> Ocurrió un error en el envío.',
                        container: 'floating',
                        timer: 5000
                    });
                    if (errorcb !== null) {
                        errorcb();
                    }
                }
            });
        }

        function blockUI() {
            $('#content-container').block({
                overlayCSS: {
                    backgroundColor: '#000',
                    opacity: 0.2,
                    cursor: 'wait'
                },
                css: {
                    border: 'none',
                    backgroundColor: 'transparent',
                    opacity: 0.8,
                    color: '#000'
                }, message: '<span class="fa fa-spinner fa-2x fa-spin"></span>'
            });
        }

        function unblockUI() {
            $('#content-container').unblock();
        }
    </script>
{% block javascript %}{% endblock %}

</html>
